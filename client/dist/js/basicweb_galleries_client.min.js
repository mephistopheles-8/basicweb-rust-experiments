/**
  * basicweb_galleries_client
  * (C) 2020 M. Bellaire
  * All rights Reserved
 */
var basicweb_galleries_client=function(){"use strict";var t="URLSearchParams"in self,n="Symbol"in self&&"iterator"in Symbol,e="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in self,o="ArrayBuffer"in self;if(o)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var e={next:function(){var n=t.shift();return{done:void 0===n,value:n}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,n){this.append(n,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(n){this.append(n,t[n])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise((function(n,e){t.onload=function(){n(t.result)},t.onerror=function(){e(t.error)}}))}function p(t){var n=new FileReader,e=d(n);return n.readAsArrayBuffer(t),e}function h(t){if(t.slice)return t.slice(0);var n=new Uint8Array(t.byteLength);return n.set(new Uint8Array(t)),n.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(n){var i;this._bodyInit=n,n?"string"==typeof n?this._bodyText=n:e&&Blob.prototype.isPrototypeOf(n)?this._bodyBlob=n:r&&FormData.prototype.isPrototypeOf(n)?this._bodyFormData=n:t&&URLSearchParams.prototype.isPrototypeOf(n)?this._bodyText=n.toString():o&&e&&((i=n)&&DataView.prototype.isPrototypeOf(i))?(this._bodyArrayBuffer=h(n.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(n)||a(n))?this._bodyArrayBuffer=h(n):this._bodyText=n=Object.prototype.toString.call(n):this._bodyText="",this.headers.get("content-type")||("string"==typeof n?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},e&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(p)}),this.text=function(){var t,n,e,r=l(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,n=new FileReader,e=d(n),n.readAsText(t),e;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var n=new Uint8Array(t),e=new Array(n.length),r=0;r<n.length;r++)e[r]=String.fromCharCode(n[r]);return e.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,n){t=u(t),n=s(n);var e=this.map[t];this.map[t]=e?e+", "+n:n},f.prototype.delete=function(t){delete this.map[u(t)]},f.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},f.prototype.set=function(t,n){this.map[u(t)]=s(n)},f.prototype.forEach=function(t,n){for(var e in this.map)this.map.hasOwnProperty(e)&&t.call(n,this.map[e],e,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(n,e){t.push(e)})),c(t)},f.prototype.values=function(){var t=[];return this.forEach((function(n){t.push(n)})),c(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(n,e){t.push([e,n])})),c(t)},n&&(f.prototype[Symbol.iterator]=f.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,n){var e,r,o=(n=n||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,n.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new f(n.headers)),this.method=(e=n.method||this.method||"GET",r=e.toUpperCase(),m.indexOf(r)>-1?r:e),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var n=new FormData;return t.trim().split("&").forEach((function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),o=e.join("=").replace(/\+/g," ");n.append(decodeURIComponent(r),decodeURIComponent(o))}})),n}function g(t,n){n||(n={}),this.type="default",this.status=void 0===n.status?200:n.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in n?n.statusText:"OK",this.headers=new f(n.headers),this.url=n.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},g.error=function(){var t=new g(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];g.redirect=function(t,n){if(-1===_.indexOf(n))throw new RangeError("Invalid status code");return new g(null,{status:n,headers:{location:t}})};var w=self.DOMException;try{new w}catch(t){(w=function(t,n){this.message=t,this.name=n;var e=Error(t);this.stack=e.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}function x(t,n){return new Promise((function(r,o){var i=new v(t,n);if(i.signal&&i.signal.aborted)return o(new w("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t,n,e={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",n=new f,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var e=t.split(":"),r=e.shift().trim();if(r){var o=e.join(":").trim();n.append(r,o)}})),n)};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new g(o,e))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new w("Aborted","AbortError"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&e&&(a.responseType="blob"),i.headers.forEach((function(t,n){a.setRequestHeader(n,t)})),i.signal&&(i.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",u)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=f,self.Request=v,self.Response=g);var E,A=setTimeout;function T(t){return Boolean(t&&void 0!==t.length)}function j(){}function k(t){if(!(this instanceof k))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],S(t,this)}function P(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,k._immediateFn((function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void B(n.promise,t)}$(n.promise,r)}else(1===t._state?$:B)(n.promise,t._value)}))):t._deferreds.push(n)}function $(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof k)return t._state=3,t._value=n,void O(t);if("function"==typeof e)return void S((r=e,o=n,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=n,O(t)}catch(n){B(t,n)}var r,o}function B(t,n){t._state=2,t._value=n,O(t)}function O(t){2===t._state&&0===t._deferreds.length&&k._immediateFn((function(){t._handled||k._unhandledRejectionFn(t._value)}));for(var n=0,e=t._deferreds.length;n<e;n++)P(t,t._deferreds[n]);t._deferreds=null}function I(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function S(t,n){var e=!1;try{t((function(t){e||(e=!0,$(n,t))}),(function(t){e||(e=!0,B(n,t))}))}catch(t){if(e)return;e=!0,B(n,t)}}function U(){}function F(t){return t()}function R(){return Object.create(null)}function C(t){t.forEach(F)}function D(t){return"function"==typeof t}function L(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function N(t,n){t.appendChild(n)}function q(t,n,e){t.insertBefore(n,e||null)}function G(t){t.parentNode.removeChild(t)}function H(t,n){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function z(t){return document.createElement(t)}function J(t){return document.createTextNode(t)}function M(){return J(" ")}function X(){return J("")}function V(t,n,e,r){return t.addEventListener(n,e,r),function(){return t.removeEventListener(n,e,r)}}function K(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function Q(t,n){n=""+n,t.data!==n&&(t.data=n)}function W(t,n){(null!=n||t.value)&&(t.value=n)}function Y(t){E=t}function Z(){if(!E)throw new Error("Function called outside component initialization");return E}k.prototype.catch=function(t){return this.then(null,t)},k.prototype.then=function(t,n){var e=new this.constructor(j);return P(this,new I(t,n,e)),e},k.prototype.finally=function(t){var n=this.constructor;return this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){return n.reject(e)}))}))},k.all=function(t){return new k((function(n,e){if(!T(t))return e(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return n([]);var o=r.length;function i(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(n){i(t,n)}),e)}r[t]=a,0==--o&&n(r)}catch(t){e(t)}}for(var a=0;a<r.length;a++)i(a,r[a])}))},k.resolve=function(t){return t&&"object"==typeof t&&t.constructor===k?t:new k((function(n){n(t)}))},k.reject=function(t){return new k((function(n,e){e(t)}))},k.race=function(t){return new k((function(n,e){if(!T(t))return e(new TypeError("Promise.race accepts an array"));for(var r=0,o=t.length;r<o;r++)k.resolve(t[r]).then(n,e)}))},k._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){A(t,0)},k._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var tt=[],nt=[],et=[],rt=[],ot=Promise.resolve(),it=!1;function at(t){et.push(t)}var ut=!1,st=new Set;function ct(){if(!ut){ut=!0;do{for(var t=0;t<tt.length;t+=1){var n=tt[t];Y(n),ft(n.$$)}for(tt.length=0;nt.length;)nt.pop()();for(var e=0;e<et.length;e+=1){var r=et[e];st.has(r)||(st.add(r),r())}et.length=0}while(tt.length);for(;rt.length;)rt.pop()();it=!1,ut=!1,st.clear()}}function ft(t){if(null!==t.fragment){t.update(),C(t.before_update);var n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(at)}}var lt,dt=new Set;function pt(t,n){t&&t.i&&(dt.delete(t),t.i(n))}function ht(t,n){var e,r=n.token={};function o(t,e,o,i){if(n.token===r){n.resolved=i;var a=n.ctx;void 0!==o&&((a=a.slice())[o]=i);var u=t&&(n.current=t)(a),s=!1;n.block&&(n.blocks?n.blocks.forEach((function(t,r){r!==e&&t&&(lt={r:0,c:[],p:lt},function(t,n,e,r){if(t&&t.o){if(dt.has(t))return;dt.add(t),lt.c.push((function(){dt.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}(t,1,1,(function(){n.blocks[r]=null})),lt.r||C(lt.c),lt=lt.p)})):n.block.d(1),u.c(),pt(u,1),u.m(n.mount(),n.anchor),s=!0),n.block=u,n.blocks&&(n.blocks[e]=u),s&&ct()}}if((e=t)&&"object"==typeof e&&"function"==typeof e.then){var i=Z();if(t.then((function(t){Y(i),o(n.then,1,n.value,t),Y(null)}),(function(t){Y(i),o(n.catch,2,n.error,t),Y(null)})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}}function yt(t,n){-1===t.$$.dirty[0]&&(tt.push(t),it||(it=!0,ot.then(ct)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function mt(t,n,e,r,o,i,a){void 0===a&&(a=[-1]);var u=E;Y(t);var s=n.props||{},c=t.$$={fragment:null,ctx:null,props:i,update:U,not_equal:o,bound:R(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:R(),dirty:a},f=!1;if(c.ctx=e?e(t,s,(function(n,e){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var a=r.length?r[0]:e;return c.ctx&&o(c.ctx[n],c.ctx[n]=a)&&(c.bound[n]&&c.bound[n](a),f&&yt(t,n)),e})):[],c.update(),f=!0,C(c.before_update),c.fragment=!!r&&r(c.ctx),n.target){if(n.hydrate){var l=function(t){return Array.from(t.childNodes)}(n.target);c.fragment&&c.fragment.l(l),l.forEach(G)}else c.fragment&&c.fragment.c();n.intro&&pt(t.$$.fragment),function(t,n,e){var r=t.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,u=r.after_update;o&&o.m(n,e),at((function(){var n=i.map(F).filter(D);a?a.push.apply(a,n):C(n),t.$$.on_mount=[]})),u.forEach(at)}(t,n.target,n.anchor),ct()}Y(u)}var vt=function(){};function bt(t,n,e){var r=t.slice();return r[14]=n[e],r}function gt(t){var n,e,r=t[17].message+"";return{c:function(){n=z("p"),e=J(r)},m:function(t,r){q(t,n,r),N(n,e)},p:function(t,n){4&n&&r!==(r=t[17].message+"")&&Q(e,r)},d:function(t){t&&G(n)}}}function _t(t){var n,e,r,o,i,a,u,s,c,f;function l(t,n){return t[0]?xt:wt}var d=l(t),p=d(t);return{c:function(){n=z("label"),e=J("Name: "),r=z("input"),o=M(),i=z("label"),a=J("Description: "),u=z("input"),s=M(),p.c(),c=X(),K(r,"type","text"),K(u,"type","text")},m:function(l,d,h){q(l,n,d),N(n,e),N(n,r),W(r,t[3].name),q(l,o,d),q(l,i,d),N(i,a),N(i,u),W(u,t[3].description),q(l,s,d),p.m(l,d),q(l,c,d),h&&C(f),f=[V(r,"input",t[9]),V(u,"input",t[10])]},p:function(t,n){8&n&&r.value!==t[3].name&&W(r,t[3].name),8&n&&u.value!==t[3].description&&W(u,t[3].description),d===(d=l(t))&&p?p.p(t,n):(p.d(1),(p=d(t))&&(p.c(),p.m(c.parentNode,c)))},d:function(t){t&&G(n),t&&G(o),t&&G(i),t&&G(s),p.d(t),t&&G(c),C(f)}}}function wt(t){var n,e,r,o;return{c:function(){n=z("button"),e=J("Add Gallery"),K(n,"type","button"),n.disabled=r=!St(t[3])},m:function(r,i,a){q(r,n,i),N(n,e),a&&o(),o=V(n,"click",t[5])},p:function(t,e){8&e&&r!==(r=!St(t[3]))&&(n.disabled=r)},d:function(t){t&&G(n),o()}}}function xt(t){var n,e,r,o;return{c:function(){n=z("button"),e=J("Update Gallery"),K(n,"type","button"),n.disabled=r=!St(t[3])},m:function(r,i,a){q(r,n,i),N(n,e),a&&o(),o=V(n,"click",t[6])},p:function(t,e){8&e&&r!==(r=!St(t[3]))&&(n.disabled=r)},d:function(t){t&&G(n),o()}}}function Et(t){var n;return{c:function(){(n=z("p")).textContent="Submitting..."},m:function(t,e){q(t,n,e)},p:U,d:function(t){t&&G(n)}}}function At(t){for(var n,e,r,o,i,a,u,s,c,f,l,d,p,h,y,m,v,b,g,_,w,x,E,A,T=t[1],j=[],k=0;k<T.length;k+=1)j[k]=$t(bt(t,T,k));return{c:function(){n=z("fieldset"),(e=z("legend")).textContent="Gallery Items",r=M(),o=z("ul");for(var A=0;A<j.length;A+=1)j[A].c();i=M(),a=z("fieldset"),(u=z("legend")).textContent="New Item",s=M(),c=z("label"),f=J("Name: "),l=z("input"),d=M(),p=z("label"),h=J("Description: "),y=z("input"),m=M(),v=z("label"),b=J("File: "),g=z("input"),_=M(),w=z("button"),x=J("Add Item"),K(l,"type","text"),K(y,"type","text"),K(g,"type","file"),K(w,"type","button"),w.disabled=E=!t[7](t[4])},m:function(E,T,k){q(E,n,T),N(n,e),N(n,r),N(n,o);for(var P=0;P<j.length;P+=1)j[P].m(o,null);N(n,i),N(n,a),N(a,u),N(a,s),N(a,c),N(c,f),N(c,l),W(l,t[4].name),N(a,d),N(a,p),N(p,h),N(p,y),W(y,t[4].description),N(a,m),N(a,v),N(v,b),N(v,g),N(a,_),N(a,w),N(w,x),k&&C(A),A=[V(l,"input",t[11]),V(y,"input",t[12]),V(g,"change",t[13]),V(w,"click",t[8])]},p:function(t,n){if(2&n){var e;for(T=t[1],e=0;e<T.length;e+=1){var r=bt(t,T,e);j[e]?j[e].p(r,n):(j[e]=$t(r),j[e].c(),j[e].m(o,null))}for(;e<j.length;e+=1)j[e].d(1);j.length=T.length}16&n&&l.value!==t[4].name&&W(l,t[4].name),16&n&&y.value!==t[4].description&&W(y,t[4].description),16&n&&E!==(E=!t[7](t[4]))&&(w.disabled=E)},d:function(t){t&&G(n),H(j,t),C(A)}}}function Tt(t){var n;return{c:function(){n=z("progress")},m:function(t,e){q(t,n,e)},p:U,d:function(t){t&&G(n)}}}function jt(t){var n,e,r;return{c:function(){K(n=z("progress"),"max",e=t[14].file.total),n.value=r=t[14].file.loaded},m:function(t,e){q(t,n,e)},p:function(t,o){2&o&&e!==(e=t[14].file.total)&&K(n,"max",e),2&o&&r!==(r=t[14].file.loaded)&&(n.value=r)},d:function(t){t&&G(n)}}}function kt(t){var n,e,r,o=t[14].file.response+"";return{c:function(){n=z("span"),e=J("Upload Failed: "),r=J(o),K(n,"class","error")},m:function(t,o){q(t,n,o),N(n,e),N(n,r)},p:function(t,n){2&n&&o!==(o=t[14].file.response+"")&&Q(r,o)},d:function(t){t&&G(n)}}}function Pt(t){var n;return{c:function(){(n=z("span")).textContent="Success",K(n,"class","success")},m:function(t,e){q(t,n,e)},p:U,d:function(t){t&&G(n)}}}function $t(t){var n,e,r,o,i=t[14].name+"";function a(t,n){return t[14].file.status===Ot?Pt:t[14].file.status===It?kt:t[14].file.total>0?jt:Tt}var u=a(t),s=u(t);return{c:function(){n=z("li"),e=J(i),r=M(),s.c(),o=M()},m:function(t,i){q(t,n,i),N(n,e),N(n,r),s.m(n,null),N(n,o)},p:function(t,r){2&r&&i!==(i=t[14].name+"")&&Q(e,i),u===(u=a(t))&&s?s.p(t,r):(s.d(1),(s=u(t))&&(s.c(),s.m(n,o)))},d:function(t){t&&G(n),s.d()}}}function Bt(t){var n,e,r,o,i,a,u={ctx:t,current:null,token:null,pending:Et,then:_t,catch:gt,error:17};ht(i=t[2],u);var s=t[0]&&At(t);return{c:function(){n=z("form"),e=z("fieldset"),(r=z("legend")).textContent="Gallery Information",o=M(),u.block.c(),a=M(),s&&s.c()},m:function(t,i){q(t,n,i),N(n,e),N(e,r),N(e,o),u.block.m(e,u.anchor=null),u.mount=function(){return e},u.anchor=null,N(n,a),s&&s.m(n,null)},p:function(e,r){var o=r[0];if(t=e,u.ctx=t,4&o&&i!==(i=t[2])&&ht(i,u));else{var a=t.slice();u.block.p(a,o)}t[0]?s?s.p(t,o):((s=At(t)).c(),s.m(n,null)):s&&(s.d(1),s=null)},i:U,o:U,d:function(t){t&&G(n),u.block.d(),u.token=null,u=null,s&&s.d()}}}vt.prototype.$destroy=function(){var t,n;t=1,null!==(n=this.$$).fragment&&(C(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[]),this.$destroy=U},vt.prototype.$on=function(t,n){var e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),function(){var t=e.indexOf(n);-1!==t&&e.splice(t,1)}},vt.prototype.$set=function(){};var Ot=1,It=2;function St(t){return t.name.length}function Ut(t,n,e){var r=n.galleryId,o=[],i=Promise.resolve(!0),a={kind:0,name:"",description:""},u={kind:0,name:"",description:"",files:null};function s(t){return r&&t.files&&t.files[0]&&t.name.length}return t.$set=function(t){"galleryId"in t&&e(0,r=t.galleryId)},[r,o,i,a,u,function(){St(a)&&e(2,i=fetch("http://localhost:8080/galleries",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(a)}).then((function(t){return t.json()})).then((function(t){return e(0,r=t)})))},function(){r&&St(a)&&e(2,i=fetch("http://localhost:8080/galleries/"+r,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(a)}).then((function(t){return t.json()})))},s,function(){if(s(u)){var t={status:0,loaded:0,total:0,response:""},n=new FormData,i=new XMLHttpRequest;n.append("itemInfo",JSON.stringify({name:u.name,description:u.description,kind:u.kind})),n.append("file",u.files[0]),i.open("POST","http://localhost:8080/galleries/"+r+"/items"),i.upload.addEventListener("progress",(function(n){var r=n.loaded,i=n.total;t.loaded=r,t.total=i,e(1,o)})),i.addEventListener("load",(function(n){200==i.status||201==i.status?t.status=Ot:t.status=It,e(1,o)})),i.addEventListener("readystatechange",(function(n){4===i.readyState&&i.response.length&&(t.response=JSON.parse(i.response)),e(1,o)})),i.send(n),o.push({name:u.name,description:u.description,kind:u.kind,file:t}),e(4,u.name="",u),e(4,u.description="",u),e(4,u.kind=0,u),e(1,o)}},function(){a.name=this.value,e(3,a)},function(){a.description=this.value,e(3,a)},function(){u.name=this.value,e(4,u)},function(){u.description=this.value,e(4,u)},function(){u.files=this.files,e(4,u)}]}var Ft=function(t){function n(n){t.call(this),mt(this,n,Ut,Bt,L,{galleryId:0})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(vt);function Rt(t,n,e){var r=t.slice();return r[6]=n[e],r}function Ct(t){var n,e,r,o=t[5].message+"";return{c:function(){n=z("p"),e=J("Error: "),r=J(o)},m:function(t,o){q(t,n,o),N(n,e),N(n,r)},p:function(t,n){1&n&&o!==(o=t[5].message+"")&&Q(r,o)},d:function(t){t&&G(n)}}}function Dt(t){var n,e;n=t[4],t[2]=n[0],t[3]=n[1];for(var r,o,i,a,u=t[2].name+"",s=t[2].description&&Lt(t),c=t[3],f=[],l=0;l<c.length;l+=1)f[l]=Nt(Rt(t,c,l));return{c:function(){e=z("h3"),r=J(u),o=M(),s&&s.c(),i=M(),a=z("div");for(var t=0;t<f.length;t+=1)f[t].c();K(a,"class","gallery svelte-bdzgnj")},m:function(t,n){q(t,e,n),N(e,r),q(t,o,n),s&&s.m(t,n),q(t,i,n),q(t,a,n);for(var u=0;u<f.length;u+=1)f[u].m(a,null)},p:function(t,n){var e;if(1&n&&u!==(u=t[2].name+"")&&Q(r,u),t[2].description?s?s.p(t,n):((s=Lt(t)).c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null),1&n){var o;for(c=t[3],o=0;o<c.length;o+=1){var l=Rt(t,c,o);f[o]?f[o].p(l,n):(f[o]=Nt(l),f[o].c(),f[o].m(a,null))}for(;o<f.length;o+=1)f[o].d(1);f.length=c.length}e=t[4],t[2]=e[0],t[3]=e[1]},d:function(t){t&&G(e),t&&G(o),s&&s.d(t),t&&G(i),t&&G(a),H(f,t)}}}function Lt(t){var n,e,r=t[2].description+"";return{c:function(){n=z("p"),e=J(r)},m:function(t,r){q(t,n,r),N(n,e)},p:function(t,n){1&n&&r!==(r=t[2].description+"")&&Q(e,r)},d:function(t){t&&G(n)}}}function Nt(t){var n,e,r,o,i,a,u,s=t[6][2].name+"";return{c:function(){n=z("figure"),e=z("figcaption"),r=J(s),o=M(),i=z("img"),u=M(),i.src!==(a="/assets/"+t[6][2].uuid)&&K(i,"src",a),K(i,"class","svelte-bdzgnj"),K(n,"class","svelte-bdzgnj")},m:function(t,a){q(t,n,a),N(n,e),N(e,r),N(n,o),N(n,i),N(n,u)},p:function(t,n){1&n&&s!==(s=t[6][2].name+"")&&Q(r,s),1&n&&i.src!==(a="/assets/"+t[6][2].uuid)&&K(i,"src",a)},d:function(t){t&&G(n)}}}function qt(t){var n;return{c:function(){(n=z("p")).textContent="..."},m:function(t,e){q(t,n,e)},p:U,d:function(t){t&&G(n)}}}function Gt(t){var n,e,r={ctx:t,current:null,token:null,pending:qt,then:Dt,catch:Ct,value:4,error:5};return ht(e=t[0],r),{c:function(){n=X(),r.block.c()},m:function(t,e){q(t,n,e),r.block.m(t,r.anchor=e),r.mount=function(){return n.parentNode},r.anchor=n},p:function(n,o){var i=o[0];if(t=n,r.ctx=t,1&i&&e!==(e=t[0])&&ht(e,r));else{var a=t.slice();a[4]=r.resolved,r.block.p(a,i)}},i:U,o:U,d:function(t){t&&G(n),r.block.d(t),r.token=null,r=null}}}function Ht(t,n,e){var r,o=n.galleryId;return t.$set=function(t){"galleryId"in t&&e(1,o=t.galleryId)},t.$$.update=function(){2&t.$$.dirty&&o&&e(0,r=Promise.all([fetch("http://localhost:8080/galleries/"+o).then((function(t){return t.json()})),fetch("http://localhost:8080/galleries/"+o+"/items").then((function(t){return t.json()}))]))},[r,o]}var zt=function(t){function n(n){t.call(this),mt(this,n,Ht,Gt,L,{galleryId:1})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(vt);return{gallery:function(t,n){return new zt({target:t,props:n})},galleryCreate:function(t,n){return new Ft({target:t,props:n})}}}();
