{
  "version": 3,
  "file": "basicweb_biz_app_client.css",
  "sources": [
    "../../../client/Gallery.html",
    "../../../client/Leaflet.html",
    "../../../client/PostMarkdown.html"
  ],
  "sourcesContent": [
    "<script>\n    import { fade } from \"svelte/transition\";\n    import Lazy from \"svelte-lazy\";\n    export let galleryId;\n\n    let displayItem;\n    let galleryRequest;\n\n    $: if (galleryId) {\n        galleryRequest = Promise.all([\n             fetch(`http://localhost:8080/galleries/${galleryId}`)\n             .then(res => res.json())\n           ,  fetch(`http://localhost:8080/galleries/${galleryId}/items`)\n             .then(res => res.json())\n            ]);\n        }\n\n    function showModal( item ) {\n        displayItem = item;\n    }\n    function hideModal() {\n        displayItem = null;\n    }\n</script>\n<style>\n    figure {\n         overflow: hidden;\n         margin:0;\n         cursor: pointer;\n    }\n    .card-image img {\n        margin: 0 auto;\n        display: block;\n        height: 400px;\n        width: 600px;\n        object-fit: cover;\n    }\n    .shadow-box {\n        position:fixed;\n        top:0;\n        bottom:0;\n        left:0;\n        right:0;\n        background: rgba(30,30,30,0.8);\n        padding: 50px;\n    }\n    .fullscreen-image {\n        width: 100%;\n        height: 100%;\n    }\n    .fullscreen-image img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n    }\n    .info-panel {\n        background: #000;\n        color: #FFF;\n    }\n    .gallery-img {\n        height:0;\n        padding-top: 56.25%;\n        background-repeat:no-repeat;\n        background-size:cover;\n        overflow:hidden;\n    }\n    .gallery-img-card {\n        width: 250px;\n    }\n    .gallery {\n        display: flex;\n        flex-wrap: wrap;\n    }\n</style>\n{#await galleryRequest}\n<p>...</p>\n{:then info}\n<h3>{info[0].name}</h3>\n{#if info[0].description}\n<p>{info[0].description}</p>\n{/if}\n<div class=\"gallery\">\n    {#each info[1] as item}\n        <figure class=\"card-image\" on:click={(e) => showModal(item[2])}>\n            <Lazy height={400}>\n                 <img alt={item[2].description} src=\"/assets/{item[2].uuid}\">\n            </Lazy>\n            <figcaption>{item[2].name}</figcaption>\n        </figure>\n    <!-- NOTE: still need to check compatibility of object-fit; otherwise we can use this -->\n    <!--\n    <div class=\"gallery-img-card\">\n        <div class=\"gallery-img\" style=\"background-image: url(/assets/{item[2].uuid});\"></div>\n        <p>{item[2].name}</p>\n    </div>\n    -->\n    {/each}\n</div>\n{:catch err}\n<p>Error: {err.message}</p>\n{/await}\n\n{#if displayItem}\n<div transition:fade=\"{{ duration: 200 }}\" class=\"shadow-box\" on:click={hideModal}>\n    <div class=\"fullscreen-image\">\n        <img src=\"/assets/{displayItem.uuid}\" alt=\"{displayItem.description}\">\n    </div>\n</div>\n{/if}\n",
    "<script>\n    import { onMount } from 'svelte';\n    import Leaflet from \"leaflet\";\n\n    export const OpenStreetMap = \"OpenStreetMap\";\n    export const StamenToner   = \"StamenToner\";\n    export const NationalMap   = \"NationalMap\";\n\n    const L = Leaflet;\n\n    export let mapType = OpenStreetMap;\n    // read only\n    export let map;\n\n    let mapElement;\n    let markers = [];\n\n    function openStreetMapSetup( map ) {\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n    }\n\n    function stamenTonerSetup( map ) {\n        var attribution \n            = `Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, `\n            + `under <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>. `\n            + `Data by <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, `\n            + `under <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>.`;\n\n        var tnmBasemapViewer = L.tileLayer(\n            'http://tile.stamen.com/toner/{z}/{x}/{y}.png', {\n                attribution: attribution\n                }).addTo(map);\n    }\n\n    function nationalMapSetup( map ) {\n       // Define the TNM Layers\n        var attribution \n            = `<a href=\"https://www.doi.gov\">U.S. Department of the Interior</a>` \n            + `| <a href=\"https://www.usgs.gov\">U.S. Geological Survey</a>`\n            + `| <a href=\"https://www.usgs.gov/laws/policies_notices.html\">Policies</a>`;\n\n\n        var tnmBasemapViewer = L.tileLayer(\n            'https://basemap.nationalmap.gov/ArcGIS/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}', {\n                maxZoom: 14,\n                attribution: attribution\n                });\n\n        var tnmBasemapNavigator = L.tileLayer(\n            'https://navigator.er.usgs.gov/tiles/tcr.cgi/{z}/{x}/{y}.png', {\n                maxZoom: 20,\n                attribution: attribution\n                });\n\n        // Add overlays\n        var highways = L.tileLayer.wms(\n            \"https://services.nationalmap.gov/ArcGIS/services/transportation/MapServer/WMSServer?\", {\n            layers: '6',\n            format: 'image/png',\n            transparent: true,\n        });\n\n        // Add baselayers and overlays to groups\n        var baseLayers = {\n            \"The National Map (Viewer)\" : tnmBasemapViewer,\n            \"The National Map (Navigator)\" : tnmBasemapNavigator\n        };\n        var overlays = {\n            \"Highways\": highways\n        };\n        var controlLayers = L.control.layers(baseLayers, overlays);\n\n        // Add the main baselayer to the map as a default (so it loads when the map\n        // is loaded\n        tnmBasemapViewer.addTo(map);\n\n        // Add the layer selector control to the map\n        controlLayers.addTo(map);\n\n    } // end [nationalMapSetup]\n\n    export function getMap () {\n        return map;\n    }\n    \n    export function leaflet ( ) {\n        return L;\n    }\n    \n    export function icon ( opts ) {\n        return L.icon(opts);\n    }\n    \n    export function divIcon ( opts ) {\n        return L.divIcon(opts);\n    }\n    \n    export function getBounds() {\n        return map.getBounds();\n    }\n    \n    export function fitBounds( bounds, opts ) {\n        return map.fitBounds( bounds, opts );\n    }\n\n    export function zoomToLocation( latlng, zoom = 14 ) {\n        map.setView(latlng, zoom)\n    }\n\n    export function addMarker( latlng, opts ) {\n        let marker = L.marker(latlng,opts).addTo(map);\n        markers.push( marker );\n    }\n\n    export function clearMarkers() {\n        markers.forEach((m) => map.removeLayer(m) );\n    }\n\n\tonMount(() => {\n        map = L.map(mapElement).setView([35.513151077520035, -96.416015625], 3);\n        switch( mapType ) {\n        case OpenStreetMap:\n            openStreetMapSetup( map );\n            break;\n        case StamenToner:\n            stamenTonerSetup( map );\n            break;\n        case NationalMap:\n            nationalMapSetup( map );\n            break;\n        default: throw \"[Leaflet.onMount] Unknown map type\";\n        }\n\t});\n</script>\n<style>\n.map-container {\n    height: 300px;\n}\n</style>\n\n<div class=\"map-container\" bind:this={mapElement}></div>\n",
    "<script>\n    import commonmark from \"commonmark\";\n    export let postId;\n    export let title = \"\";\n    export let description = \"\";\n    export let body = \"\";\n\n    const api = \"http://localhost:8080/api/v1\";\n\n    let postRequest = Promise.resolve(true);\n    let saveRequest;\n    let rendered = \"\";\n    let timer;\n    \n    const reader = new commonmark.Parser({smart: true});\n    const writer = new commonmark.HtmlRenderer({safe: true});\n\n    $: if (postId && !saveRequest) {\n        postRequest \n            = fetch(`${api}/posts/${postId}`)\n            . then( res => res.json() )\n            . then( res => {\n                title = res.title;\n                description = res.description;\n                body = res.body;\n                saveRequest = Promise.resolve(res);\n                return res;\n            });\n    }\n\n    $: {\n        if( timer ) {\n            clearTimeout(timer);\n        }\n        timer = setTimeout( () => {\n            let parsed = reader.parse( body );\n            rendered = writer.render( parsed );\n        }, 250);\n    }\n\n    function savePost () {\n        if( title && description && body) {\n            let endpoint \n                = `${api}/posts`\n                + (postId ? `/${postId}` : \"\");\n\n            saveRequest\n                = fetch(endpoint,{\n                        method : \"POST\"\n                     ,  headers : {\n                            \"Content-Type\" : \"application/json\"\n                       }\n                     , credentials: \"same-origin\"\n                     , body : JSON.stringify({\n                           title\n                         , description\n                         , body\n                         , format : 1\n                        }) \n                 })\n                . then(res => res.json())\n                . then(res => {\n                        if( !postId ) \n                            postId = res.id;\n                        return res; \n                  });\n        }\n    }\n\n</script>\n<style>\n    label {\n        display: block;\n    }\n    textarea {\n        resize: none;\n    }\n    .editor {\n        height: 350px;\n        display: flex;\n    }\n    .editor > * {\n        flex-grow: 1;\n        width: 50%;\n        max-height: 100%;\n        overflow: auto;\n    }\n    .preview {\n        padding: 1rem;\n    }\n</style>\n\n{#await postRequest}\n<p>...</p>\n{:then}\n<label>Title <input bind:value={title} type=\"text\"></label>\n<label>Description <input bind:value={description} type=\"text\"></label>\n<label>Body</label>\n<div class=\"editor\">\n    <textarea bind:value={body}></textarea>\n    <div class=\"preview\">{@html rendered}</div>\n</div>\n<button on:click={savePost}>Save</button>\n{#if saveRequest}\n{#await saveRequest}\n<p>Saving...</p>\n{:then p}\n<p>Saved: {p.updated}</p>\n{:catch err}\n<p>Error: {err.message}</p>\n{/await}\n{/if}\n{:catch err}\n<p>Error: {err.message}</p>\n{/await}\n"
  ],
  "names": [],
  "mappings": "AAyBI,MAAM,8BAAC,CAAC,AACH,QAAQ,CAAE,MAAM,CAChB,OAAO,CAAC,CACR,MAAM,CAAE,OAAO,AACpB,CAAC,AACD,0BAAW,CAAC,GAAG,eAAC,CAAC,AACb,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,KAAK,CACZ,UAAU,CAAE,KAAK,AACrB,CAAC,AACD,WAAW,8BAAC,CAAC,AACT,SAAS,KAAK,CACd,IAAI,CAAC,CACL,OAAO,CAAC,CACR,KAAK,CAAC,CACN,MAAM,CAAC,CACP,UAAU,CAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAC9B,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,iBAAiB,8BAAC,CAAC,AACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AAChB,CAAC,AACD,gCAAiB,CAAC,GAAG,eAAC,CAAC,AACnB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,AACvB,CAAC,AAeD,QAAQ,8BAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,AACnB,CAAC;ACiEL,cAAc,cAAC,CAAC,AACZ,MAAM,CAAE,KAAK,AACjB,CAAC;ACpEG,KAAK,4BAAC,CAAC,AACH,OAAO,CAAE,KAAK,AAClB,CAAC,AACD,QAAQ,4BAAC,CAAC,AACN,MAAM,CAAE,IAAI,AAChB,CAAC,AACD,OAAO,4BAAC,CAAC,AACL,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,AACjB,CAAC,AACD,qBAAO,CAAG,cAAE,CAAC,AACT,SAAS,CAAE,CAAC,CACZ,KAAK,CAAE,GAAG,CACV,UAAU,CAAE,IAAI,CAChB,QAAQ,CAAE,IAAI,AAClB,CAAC,AACD,QAAQ,4BAAC,CAAC,AACN,OAAO,CAAE,IAAI,AACjB,CAAC"
}